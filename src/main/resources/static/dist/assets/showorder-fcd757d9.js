import{o as B,r as i,a as N,j as v,b as n,d,e as y,f as e,g as f,v as D,l as I,I as M,i as E,F as h,h as g,t as l,J as O}from"./index-e86ed1bf.js";import{m as P}from"./memberNavBar-cc343440.js";import{C as U}from"./Carousel-a86a19a5.js";const V={class:"container my-5"},$={class:"row justify-content-center"},S={class:"col-lg-2"},T={class:"col-lg-8 mydiv"},j=e("h1",{class:"text-center"},"課程訂單",-1),F={class:"col-3 mb-3"},R=e("option",{value:"5",selected:""},"每頁 5 筆資料",-1),q=e("option",{value:"10"},"每頁 10 筆資料",-1),z=[R,q],A={class:"col-3"},H=e("i",{class:"bi bi-patch-question-fill",title:"請輸入西元年,年-月,年-月-日(月日請補0)"},null,-1),J=e("hr",null,null,-1),K={id:"departmentsTable",class:"table table-bordered mt-3"},L=e("thead",{class:"align-middle text-center"},[e("tr",{class:"table-success"},[e("th",null,"訂單編號"),e("th",null,"訂單日期"),e("th",null,"付款方式"),e("th",null,"付款狀態"),e("th",null,"詳細資料")])],-1),W={class:"align-middle text-center"},G=["onClick"],Q={class:"pagination pagination-sm"},X=["onClick"],Y={class:"modal fade",id:"updateModal2",tabindex:"-1","aria-labelledby":"updateModal2","aria-hidden":"true"},Z={class:"modal-dialog modal-lg"},ee={class:"modal-content"},te=e("div",{class:"modal-header"},[e("h5",{class:"modal-title"},"詳細資料"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),se={class:"modal-body"},le={class:"table"},oe=e("thead",{class:"align-middle text-center"},[e("tr",{class:"table-primary"},[e("th",null,"項目編號"),e("th",null,"課程名稱"),e("th",null,"課程日期/時間"),e("th",null,"上課教室"),e("th",null,"課程價格"),e("th",null,"優惠金額"),e("th",null,"總金額")])],-1),ae={class:"align-middle text-center"},ie={__name:"showorder",setup(ne){const k="http://localhost:8080/fithub";B(()=>{b()}),i({}),i({});const u=i([]);let c=i(5),r=i("");const a=N({memberid:0,number:0,row:c.value,date:r.value}),_=i([]),p=o=>{a.row=c.value,a.date=r.value,o>=0?a.number=o-1:a.number=0,b()},b=async()=>{try{a.memberid=parseInt(window.localStorage.getItem("memberid")),console.log(a);const o=await v.post("http://localhost:8080/fithub/orders/findpagebymemberid",a);u.value=o.data,console.log(u.value)}catch(o){console.error("Error getrentorder data:",o)}},w=o=>{x(o);const s=document.getElementById("updateModal2");bootstrap.Modal.getInstance(s).toggle()},x=async o=>{try{const s=await v.get(`${k}/order-items/items/${o}`);console.log("API Response:",s.data),_.value=s.data,console.log("test"),console.log(_.value)}catch(s){console.error("Error getting order item by order id:",s)}};return(o,s)=>(n(),d(h,null,[y(U),e("div",V,[e("div",$,[e("div",S,[y(P)]),e("div",T,[j,e("div",F,[f(e("select",{class:"form-select",onChange:s[0]||(s[0]=t=>p(-1)),"onUpdate:modelValue":s[1]||(s[1]=t=>M(c)?c.value=t:c=t)},z,544),[[D,I(c),void 0,{number:!0}]])]),e("div",A,[H,f(e("input",{type:"search",class:"form-control mb-3",onKeyup:s[2]||(s[2]=t=>p(-1)),"onUpdate:modelValue":s[3]||(s[3]=t=>M(r)?r.value=t:r=t),placeholder:"請輸入訂單日期查詢"},null,544),[[E,I(r)]])]),J,e("table",K,[L,e("tbody",W,[(n(!0),d(h,null,g(u.value.content,(t,m)=>(n(),d("tr",{key:m},[e("td",null,l(t.orderId),1),e("td",null,l(t.orderDate),1),e("td",null,l(t.orderPaymentMethod),1),e("td",null,l(t.orderCondition),1),e("td",null,[e("button",{class:"btn btn-outline-danger","data-bs-toggle":"modal",onClick:C=>w(t.orderId),"data-bs-target":"#updateModal2"}," 查看 ",8,G)])]))),128))])]),e("nav",null,[e("ul",Q,[(n(!0),d(h,null,g(u.value.totalPages,(t,m)=>(n(),d("li",{class:"page-item",key:m},[e("a",{class:O(["page-link",{"selected-page":t-1===u.value.number}]),onClick:C=>p(t)},l(t),11,X)]))),128))])])])])]),e("div",Y,[e("div",Z,[e("div",ee,[te,e("div",se,[e("table",le,[oe,e("tbody",ae,[(n(!0),d(h,null,g(_.value,(t,m)=>(n(),d("tr",{key:m},[e("td",null,l(t.itemId),1),e("td",null,l(t.classes.course.courseName),1),e("td",null,l(t.classes.classDate)+" "+l(t.classes.classTime),1),e("td",null,l(t.classes.classroom.classroomName),1),e("td",null,l(t.classes.price),1),e("td",null,l(t.coupon.coupondiscount),1),e("td",null,l(t.classes.price-t.coupon.coupondiscount),1)]))),128))])])])])])])],64))}};export{ie as default};
