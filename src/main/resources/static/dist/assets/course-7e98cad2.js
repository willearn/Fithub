import{b as i,d as g,f as o,F as m,h as k,J as P,t as w,e as p,y as I,z as N,l as C,R as x,q as v,H as L,r as y,w as A,a as j,M as B,o as U,g as V,E,j as b}from"./index-e86ed1bf.js";import{c as O,C as D}from"./icon-cart-cbb87b19.js";import{C as F}from"./Carousel-a86a19a5.js";const M={class:"pagination col-2"},S={class:"page-item"},z=o("span",{"aria-hidden":"true"},"«",-1),q=[z],G=["onClick"],H=["disabled"],J={class:"page-item"},T=o("span",{"aria-hidden":"true"},"»",-1),K=[T],Q={__name:"pagination",props:{totalPages:Number,page:Number},emits:["clickAnyCoursePage-emit","clickNaborCoursePage-emit"],setup(n,{emit:d}){const a=l=>{d("clickNaborCoursePage-emit",l,0)},r=l=>{d("clickAnyCoursePage-emit",0,l)};return(l,u)=>(i(),g("nav",null,[o("ul",M,[o("li",S,[o("button",{class:"page-link",onClick:u[0]||(u[0]=c=>a(-1)),"aria-label":"Previous"},q)]),(i(!0),g(m,null,k(n.totalPages,c=>(i(),g("li",{class:P(["page-item",{disabled:c==n.page}]),onClick:e=>r(c)},[o("button",{class:"page-link",disabled:c==n.page},w(c),9,H)],10,G))),256)),o("li",J,[o("button",{class:"page-link",onClick:u[1]||(u[1]=c=>a(1)),"aria-label":"Next"},K)])])]))}},W={class:"list-group d-flex justify-content-center my-5"},X={__name:"listGroup",props:{urlPattern:String,allCourseCategories:Object,pageCourseCategoryId:Number},setup(n){return(d,a)=>(i(),g("div",W,[p(C(x),{to:"/course/0",disabled:n.pageCourseCategoryId==0,class:P(["list-group-item list-group-item-action",{disabled:n.pageCourseCategoryId==0}])},{default:I(()=>[N("全部課程")]),_:1},8,["disabled","class"]),(i(!0),g(m,null,k(n.allCourseCategories,({categoryId:r,categoryName:l,index:u})=>(i(),v(C(x),{to:`/course/${r}`,disabled:r==n.pageCourseCategoryId,class:P(["list-group-item list-group-item-action",{disabled:r==n.pageCourseCategoryId}])},{default:I(()=>[N(w(l),1)]),_:2},1032,["to","disabled","class"]))),256))]))}},Y={mounted:n=>{n.focus()}},Z={class:"page-section",id:"courseView"},ee={class:"container"},ae={class:"row"},se={class:"col-2"},te={class:"col-9"},oe={key:0,class:"text-center mb-4"},re={key:1,class:"text-center mb-4"},ne={class:"row row-cols-1 row-cols-md-3 row-cols-lg-4 g-4 justify-content-center"},ue={__name:"course",setup(n){const d="http://localhost:8080/fithub",a=L(),r=y(parseInt(a.params.categoryid));A(()=>a.params.categoryid,async s=>{s==0?(e.page=1,r.value=0,await f()):a.params.categoryid!=0&&a.params.categoryid!=null&&(e.page=1,r.value=s,await _())});const l=y([]),u=async()=>{const s=`${d}/coursecategories/findAll`,t=await b.get(s);l.value=t.data},c=y([]),e=j({page:1,totalPages:1,numberOfCourses:6,showPagination:!1}),f=async()=>{const s=`${d}/course/page`,t=await b.get(s,{params:{p:e.page}});c.value=t.data,e.totalPages=parseInt(t.headers["total-pages"]),e.numberOfCourses=parseInt(t.headers["number-of-elements"]),e.showPagination=!0},_=async()=>{if(r!=0){const s=`${d}/course/page/${r.value}`,t=await b.get(s,{params:{p:e.page}});c.value=t.data,e.totalPages=parseInt(t.headers["total-pages"]),e.numberOfCourses=parseInt(t.headers["number-of-elements"]),e.showPagination=!0}},$=(s,t)=>{s==0&&e.page!=t?e.page=t:t==0&&e.page*s!=-1&&e.page+s<=e.totalPages&&(e.page+=s)};return A(()=>e.page,async()=>{a.params.categoryid==0?await f():a.params.categoryid!=0&&a.params.categoryid!=null&&await _()}),B(()=>{u()}),U(()=>{a.params.categoryid==0?f():a.params.categoryid!=0&&a.params.categoryid!=null&&_()}),(s,t)=>(i(),g(m,null,[p(F),o("section",Z,[o("div",ee,[o("div",ae,[o("div",se,[V(p(X,{class:"d-flex justify-content-center",allCourseCategories:l.value,pageCourseCategoryId:parseInt(r.value),tabindex:"0"},null,8,["allCourseCategories","pageCourseCategoryId"]),[[C(Y)]])]),o("div",te,[r.value!=0?(i(),g("h1",oe,w(l.value.find(h=>(console.log("rander page h1"),h.categoryId==r.value)).categoryName)+"課程列表 ",1)):(i(),g("h1",re,"全部課程列表")),o("div",ne,[(i(!0),g(m,null,k(c.value,(h,R)=>(i(),v(O,{class:"col-3 mx-2 my-3",cardAmount:R,course:h,URL:C(d)},null,8,["cardAmount","course","URL"]))),256))]),e.showPagination?(i(),v(Q,{key:2,totalPages:e.totalPages,page:e.page,class:"d-flex justify-content-center mt-3",onClickNaborCoursePageEmit:$,onClickAnyCoursePageEmit:$},null,8,["totalPages","page"])):E("",!0)])])])]),p(D)],64))}};export{ue as default};
