import{n as A,r as b,o as R,b as y,d as B,a as E,j as q,q as z,l as C,_ as F,x as I,f as e,g as k,i as S,e as u,y as T,z as f,S as g,A as $,B as V,L as N,p as j,k as L,C as P,D as G}from"./index-e86ed1bf.js";import{_ as U}from"./4-2a4bab2f.js";const H=A({__name:"vueRecaptcha",props:{sitekey:{type:String,required:!0},size:{type:String,required:!1,default:"normal"},theme:{type:String,required:!1,default:"light"},hl:{type:String,required:!1},loadingTimeout:{type:Number,required:!1,default:0}},emits:{verify:o=>o!=null&&o!="",error:o=>o,expire:null,fail:null},setup(o,{expose:l,emit:t}){const r=o,c=b(null);let n=null;l({execute:function(){window.grecaptcha.execute(n)},reset:function(){window.grecaptcha.reset(n)}});function s(){n=window.grecaptcha.render(c.value,{sitekey:r.sitekey,theme:r.theme,size:r.size,callback:a=>t("verify",a),"expired-callback":()=>t("expire"),"error-callback":()=>t("fail")})}return R(()=>{window.grecaptcha==null?new Promise((a,d)=>{let i,m=!1;window.recaptchaReady=function(){m||(m=!0,clearTimeout(i),a())};const w="recaptcha-script",h=D=>()=>{var x;m||(m=!0,clearTimeout(i),(x=document.getElementById(w))==null||x.remove(),d(D))};r.loadingTimeout>0&&(i=setTimeout(h("timeout"),r.loadingTimeout));const v=window.document,p=v.createElement("script");p.id=w,p.onerror=h("error"),p.onabort=h("aborted"),p.setAttribute("src",`https://www.google.com/recaptcha/api.js?onload=recaptchaReady&render=explicit&hl=${r.hl}&_=${+new Date}`),v.head.appendChild(p)}).then(()=>{s()}).catch(a=>{t("error",a)}):s()}),(a,d)=>(y(),B("div",{ref_key:"recaptchaDiv",ref:c},null,512))}}),J={__name:"GoogleReCaptchaV2",emits:["recaptcha"],setup(o,{emit:l}){const t="http://localhost:8080/fithub",r={response_token:""},c=E({data_v2SiteKey:"6LdVjScoAAAAAB0J23F9xuSGdZHPG7wLiPU7H0Z1",recaptchaVerified:async n=>{r.response_token=n,(await q.post(`${t}/memberloginrecaptcha`,r)).status==200&&l("recaptcha","true")},recaptchaExpired:()=>{l("recaptcha","false")},recaptchaFailed:()=>{l("recaptcha","false")}});return(n,s)=>(y(),z(C(H),{sitekey:c.data_v2SiteKey,size:"normal",theme:"light",hl:"zh-TW",onVerify:c.recaptchaVerified,onExpire:c.recaptchaExpired,onFail:c.recaptchaFailed},null,8,["sitekey","onVerify","onExpire","onFail"]))}};const _=o=>(j("data-v-3c8c1ccb"),o=o(),L(),o),K={class:"vh-100 pt-5",style:{"background-color":"#E8E1D4"}},M={class:"container py-5 h-100"},Z={class:"row d-flex justify-content-center align-items-center h-100"},O={class:"col-lg-8"},W={class:"card",style:{"border-radius":"1rem"}},Q={class:"row g-0"},X=_(()=>e("div",{class:"col-md-6 col-lg-5 d-none d-md-block"},[e("img",{src:U,alt:"login form",class:"myimg-full",style:{"border-radius":"1rem 0 0 1rem"}})],-1)),Y={class:"col-md-6 col-lg-7 d-flex align-items-center"},ee={class:"card-body p-4 p-lg-5 text-black"},te=_(()=>e("h2",{class:"pb-5",style:{"letter-spacing":"1px"}},"Sign into your account",-1)),ae={class:"mb-4"},oe=_(()=>e("label",{class:"form-label"},"Email address",-1)),re=_(()=>e("label",{class:"form-label"},"Password",-1)),se={class:"form-outline mb-4"},ce={class:"small text-muted"},le={class:"pb-lg-2 mb-5"},ne={__name:"login",setup(o){b();const l=b(Boolean),t=E({memberemail:"",memberpassword:""}),r=s=>{l.value=JSON.parse(s)},c=async()=>{try{if(console.log(!t.memberemail.trim()),!t.memberemail.trim()||!t.memberpassword.trim()){g.fire({title:"請輸入帳號密碼",icon:"error",confirmButtonText:"確定"});return}if(l.value==!0)if((await $(t.memberemail,t.memberpassword)).status==0)V.push({name:"home"});else{g.fire({title:"帳號密碼錯誤",icon:"error",confirmButtonText:"確定"});return}else g.fire({title:"請先驗證",icon:"error",confirmButtonText:"確定"})}catch{}},n=async s=>{const a=P(s.credential);console.log(a),(await G(a.email,a.name)).status==0&&V.push({name:"home"})};return(s,a)=>{const d=I("router-link");return y(),B("section",K,[e("div",M,[e("div",Z,[e("div",O,[e("div",W,[e("div",Q,[X,e("div",Y,[e("div",ee,[te,e("div",ae,[oe,k(e("input",{type:"email",class:"form-control form-control-lg","onUpdate:modelValue":a[0]||(a[0]=i=>t.memberemail=i),placeholder:"abc123456@example.com"},null,512),[[S,t.memberemail]])]),re,e("div",se,[k(e("input",{type:"password",class:"form-control form-control-lg","onUpdate:modelValue":a[1]||(a[1]=i=>t.memberpassword=i)},null,512),[[S,t.memberpassword]])]),u(J,{onRecaptcha:r}),e("div",{class:"pt-1 mb-4"},[e("button",{class:"btn btn-dark btn-lg btn-block",type:"button",onClick:c},"登入")]),e("a",ce,[u(d,{to:"/forgotpassword"},{default:T(()=>[f("忘記密碼")]),_:1})]),e("p",le,[f("還沒有會員?"),u(d,{to:"/register"},{default:T(()=>[f("立即註冊")]),_:1}),e("div",null,[u(C(N),{callback:n})])])])])])])])])])])}}},pe=F(ne,[["__scopeId","data-v-3c8c1ccb"]]);export{pe as default};
