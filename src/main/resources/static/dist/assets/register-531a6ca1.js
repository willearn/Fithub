import{a as f,r as v,B as h,b as r,d as a,f as e,E as i,g as n,i as m,G as V,z as B,S as c,j as g}from"./index-e86ed1bf.js";const D={class:"page-section",style:{"background-color":"#E8E1D4"}},I=e("div",{style:{height:"100px","background-color":"#E8E1D4"}},null,-1),N={class:"container"},$={class:"row d-flex justify-content-center align-items-center"},j={class:"col-lg-6"},K={class:"card",style:{"border-radius":"1rem"}},M={class:"row g-0"},R={class:"col-lg-12 d-flex align-items-center"},S={class:"card-body text-black"},G=e("h1",{class:"text-center"},"會員註冊",-1),q=e("hr",null,null,-1),A=e("div",null,[e("input",{type:"button",value:"測試資料",class:"btn btn-secondary ms-1"})],-1),F=e("label",{class:"form-label mb-1"},"信箱",-1),H={key:0,class:"text-danger"},J={class:"my-1"},L={class:"mb-1"},O=e("label",{class:"form-label"},"密碼",-1),P={key:0,class:"text-danger"},Q={class:"mb-1"},W=e("label",{class:"form-label"},"再次確認密碼",-1),X={key:0,class:"text-danger"},Y={key:1,class:"text-danger"},Z={class:"mb-1"},ee=e("label",{class:"form-label"},"手機號碼",-1),te={key:0,class:"text-danger"},se={class:"mb-1"},oe=e("label",{class:"form-label"},"姓名",-1),ne={key:0,class:"text-danger"},re={class:"mb-1"},ae=e("label",{class:"form-label"},"性別",-1),le={key:0,class:"text-danger"},ie={class:"mb-1"},me=e("label",{class:"form-label"},"縣市",-1),ce={key:0,class:"text-danger"},de={class:"mb-1"},be=e("label",{class:"form-label"},"地區",-1),ue={key:0,class:"text-danger"},pe={class:"mb-1"},fe=e("label",{class:"form-label"},"地址",-1),_e={key:0,class:"text-danger"},ye={class:"mb-1"},ve=e("label",{class:"form-label"},"生日",-1),he={key:0,class:"text-danger"},ke={__name:"register",setup(ge){const _="http://localhost:8080/fithub",t=f({memberemail:"",memberpassword:"",memberphoneno:"",membername:"",membergender:"",membercity:"",memberzone:"",memberaddress:"",memberbirthday:""}),d=f({check:!0,againpassword:""}),b=f({email:"",verificationcode:""}),y=v(!1),u=v(0);let x;const p=f({button:"發送驗證碼"}),U=async()=>{if(!t.memberemail.trim()||!t.memberpassword.trim()||!t.memberphoneno.trim()||!t.membername.trim()||!t.membergender.trim()||!t.membercity.trim()||!t.memberzone.trim()||!t.memberaddress.trim()||!t.memberbirthday.trim()){c.fire({title:"請輸入正確資料",icon:"warning",confirmButtonText:"確定"});return}if(!y.value){c.fire({title:"請驗證信箱",icon:"warning",confirmButtonText:"確定"});return}if(d.check)try{(await g.post(`${_}/members`,t)).status==200&&c.fire({title:"註冊成功，請登入",icon:"success",confirmButtonText:"確定"}).then(s=>{s.isConfirmed&&h.push({name:"login"})})}catch{}},T=async()=>{if(!t.memberemail.trim()){c.fire({title:"請輸入email",icon:"warning",confirmButtonText:"確定"});return}b.email=t.memberemail;try{(await g.post(`${_}/verificationcode`,b)).status==200&&(E(),c.fire({title:"發送成功，請至信箱收取驗證碼",icon:"success",confirmButtonText:"確定"}))}catch(l){l.response.status==400?c.fire({title:"email已經被使用",icon:"warning",confirmButtonText:"確定"}):c.fire({title:"請輸入正確email",icon:"warning",confirmButtonText:"確定"})}},C=async()=>{if(!t.memberemail.trim()||!b.verificationcode.trim()){c.fire({title:"請輸入email及驗證碼",icon:"warning",confirmButtonText:"確定"});return}b.email=t.memberemail;try{const l=await g.post(`${_}/verificationcode/check`,b);y.value=!0,c.fire({title:"驗證成功",icon:"success",confirmButtonText:"確定"})}catch{y.value=!1,c.fire({title:"驗證碼錯誤",icon:"warning",confirmButtonText:"確定"})}},k=v({}),E=()=>{u.value=60,k.value=x=setInterval(()=>{var l=document.getElementById("verifybtn");u.value>0?(l.disabled=!0,p.button="重新發送驗證碼("+u.value+")",u.value-=1):(clearInterval(x),p.button="發送驗證碼",l.disabled=!1)},1e3)},w=()=>{t.memberpassword===d.againpassword?d.check=!0:d.check=!1},z=()=>{h.back()};return h.beforeResolve(async l=>{clearInterval(k.value),console.log("test")}),(l,s)=>(r(),a("section",D,[I,e("div",N,[e("div",$,[e("div",j,[e("div",K,[e("div",M,[e("div",R,[e("div",S,[G,q,e("div",null,[A,F,t.memberemail?i("",!0):(r(),a("span",H,"*")),n(e("input",{type:"email",class:"form-control form-control-lg","onUpdate:modelValue":s[0]||(s[0]=o=>t.memberemail=o),placeholder:"abc123456@example.com"},null,512),[[m,t.memberemail]]),e("div",J,[n(e("input",{type:"button",class:"btn btn-secondary","onUpdate:modelValue":s[1]||(s[1]=o=>p.button=o),onClick:T,id:"verifybtn"},null,512),[[m,p.button]])]),n(e("input",{type:"text",placeholder:"輸入驗證碼","onUpdate:modelValue":s[2]||(s[2]=o=>b.verificationcode=o)},null,512),[[m,b.verificationcode]]),e("input",{type:"button",class:"btn btn-secondary ms-1",value:"驗證",onClick:C})]),e("div",L,[O,t.memberpassword?i("",!0):(r(),a("span",P,"*")),n(e("input",{type:"password",class:"form-control","onUpdate:modelValue":s[3]||(s[3]=o=>t.memberpassword=o),onKeyup:w},null,544),[[m,t.memberpassword]])]),e("div",Q,[W,d.againpassword?i("",!0):(r(),a("span",X,"*")),n(e("input",{type:"password",class:"form-control","onUpdate:modelValue":s[4]||(s[4]=o=>d.againpassword=o),onKeyup:w},null,544),[[m,d.againpassword]]),d.check?i("",!0):(r(),a("span",Y,"密碼不相符"))]),e("div",Z,[ee,t.memberphoneno?i("",!0):(r(),a("span",te,"*")),n(e("input",{type:"email",class:"form-control","onUpdate:modelValue":s[5]||(s[5]=o=>t.memberphoneno=o)},null,512),[[m,t.memberphoneno]])]),e("div",se,[oe,t.membername?i("",!0):(r(),a("span",ne,"*")),n(e("input",{type:"email",class:"form-control","onUpdate:modelValue":s[6]||(s[6]=o=>t.membername=o)},null,512),[[m,t.membername]])]),e("div",re,[ae,t.membergender?i("",!0):(r(),a("span",le,"*")),n(e("input",{style:{width:"1em"},type:"radio",name:"gender",value:"男","onUpdate:modelValue":s[7]||(s[7]=o=>t.membergender=o)},null,512),[[V,t.membergender]]),B("男 "),n(e("input",{style:{width:"1em"},type:"radio",name:"gender",value:"女","onUpdate:modelValue":s[8]||(s[8]=o=>t.membergender=o)},null,512),[[V,t.membergender]]),B("女 ")]),e("div",ie,[me,t.membercity?i("",!0):(r(),a("span",ce,"*")),n(e("input",{type:"text",class:"form-control","onUpdate:modelValue":s[9]||(s[9]=o=>t.membercity=o)},null,512),[[m,t.membercity]])]),e("div",de,[be,t.memberzone?i("",!0):(r(),a("span",ue,"*")),n(e("input",{type:"text",class:"form-control","onUpdate:modelValue":s[10]||(s[10]=o=>t.memberzone=o)},null,512),[[m,t.memberzone]])]),e("div",pe,[fe,t.memberaddress?i("",!0):(r(),a("span",_e,"*")),n(e("input",{type:"text",class:"form-control","onUpdate:modelValue":s[11]||(s[11]=o=>t.memberaddress=o)},null,512),[[m,t.memberaddress]])]),e("div",ye,[ve,t.memberbirthday?i("",!0):(r(),a("span",he,"*")),n(e("input",{type:"date",class:"form-control","onUpdate:modelValue":s[12]||(s[12]=o=>t.memberbirthday=o)},null,512),[[m,t.memberbirthday]])]),e("div",{class:"mb-1 mt-3"},[e("button",{class:"btn btn-dark btn-lg btn-block",type:"button",onClick:z},"返回"),e("button",{class:"btn btn-dark btn-lg btn-block ms-1",type:"button",onClick:U},"註冊")])])])])])])])])]))}};export{ke as default};
